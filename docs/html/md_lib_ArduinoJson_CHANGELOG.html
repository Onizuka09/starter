<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Starter: ArduinoJson: change log</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Starter
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ArduinoJson: change log </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md168"></a>
v6.20.1 (2023-02-08)</h1>
<ul>
<li>Remove explicit exclusion of <code>as&lt;char*&gt;()</code> and <code>as&lt;char&gt;()</code> (issue #1860) If you try to call them, you'll now get the same error message as any unsupported type. You could also add a custom converter for <code>char*</code> and <code>char</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md169"></a>
v6.20.0 (2022-12-26)</h1>
<ul>
<li>Add <code>JsonVariant::shallowCopy()</code> (issue #1343)</li>
<li>Fix &lsquo;9.22337e+18 is outside the range of representable values of type 'long&rsquo;<code></code></li>
<li><code>Fix comparison operators for</code>JsonArray<code>,</code>JsonArrayConst<code>,</code>JsonObject<code>, and</code>JsonObjectConst<code></code></li>
<li><code>Fix lax parsing of</code>true<code>,</code>false<code>, and</code>null<code>(issue #1781)</code></li>
<li><code>Remove undocumented</code>accept()<code>functions</code></li>
<li><code>Rename</code>addElement()<code>to</code>add()<code></code></li>
<li><code>Remove</code>getElement()<code>,</code>getOrAddElement()<code>,</code>getMember()<code>, and</code>getOrAddMember()<code></code></li>
<li><code>Remove undocumented</code>JsonDocument::data()<code>and</code>JsonDocument::memoryPool()<code></code></li>
<li><code>Remove undocumented</code>JsonArrayIterator::internal()<code>and</code>JsonObjectIterator::internal()<code></code></li>
<li><code>Rename things in</code>ARDUINOJSON_NAMESPACE` to match the public names</li>
<li>Add documentation to most public symbols</li>
<li>Remove support for naked <code>char</code> (was deprecated since 6.18.0)</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p>This release hides <code>JsonVariant</code>'s functions that were only intended for internal use. If you were using them in your programs, you must replace with <code>operator[]</code> and <code>to&lt;JsonVariant&gt;()</code>, like so:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">// before</div>
<div class="line">JsonVariant a = variant.getElement(idx);</div>
<div class="line">JsonVariant b = variant.getOrAddElement(idx);</div>
<div class="line">JsonVariant c = variant.getMember(key);</div>
<div class="line">JsonVariant d = variant.getOrAddMember(key);</div>
<div class="line"> </div>
<div class="line">// after</div>
<div class="line">JsonVariant a = variant[idx];</div>
<div class="line">JsonVariant b = idx &lt; variant.size() ? variant[idx] : variant[idx].to&lt;JsonVariant&gt;();</div>
<div class="line">JsonVariant c = variant[key];</div>
<div class="line">JsonVariant d = variant.containsKey(key) ? variant[key] : variant[key].to&lt;JsonVariant&gt;();</div>
</div><!-- fragment --> </blockquote>
<h1><a class="anchor" id="autotoc_md170"></a>
v6.19.4 (2022-04-05)</h1>
<ul>
<li>Add <code>ElementProxy::memoryUsage()</code></li>
<li>Add <code>MemberProxy::memoryUsage()</code> (issue #1730)</li>
<li>Add implicit conversion from <code>JsonDocument</code> to <code>JsonVariant</code></li>
<li>Fix comparisons operators with <code>const JsonDocument&amp;</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md171"></a>
v6.19.3 (2022-03-08)</h1>
<ul>
<li>Fix &lsquo;call of overloaded '<a class="el" href="classString.html">String(const char*, int)</a>&rsquo; is ambiguous<code></code></li>
<li><code>Fix</code>JsonString<code>operator</code>==<code>and</code>!=<code>for non-zero-terminated string</code></li>
<li><code>Fix</code>-Wsign-conversion` on GCC 8 (issue #1715)</li>
<li>MessagePack: serialize round floats as integers (issue #1718)</li>
</ul>
<h1><a class="anchor" id="autotoc_md172"></a>
v6.19.2 (2022-02-14)</h1>
<ul>
<li>Fix &lsquo;cannot convert 'pgm_p&rsquo; to 'const void*'` (issue #1707)</li>
</ul>
<h1><a class="anchor" id="autotoc_md173"></a>
v6.19.1 (2022-01-14)</h1>
<ul>
<li>Fix crash when adding an object member in a too small <code>JsonDocument</code></li>
<li>Fix filter not working in zero-copy mode (issue #1697)</li>
</ul>
<h1><a class="anchor" id="autotoc_md174"></a>
v6.19.0 (2022-01-08)</h1>
<ul>
<li>Remove <code>ARDUINOJSON_EMBEDDED_MODE</code> and assume we run on an embedded platform. <br  />
 Dependent settings (like <code>ARDUINOJSON_DEFAULT_NESTING_LIMIT</code>) must be set individually.</li>
<li>Change the default of <code>ARDUINOJSON_USE_DOUBLE</code> to <code>1</code></li>
<li>Change the default of <code>ARDUINOJSON_USE_LONG_LONG</code> to <code>1</code> on 32-bit platforms</li>
<li>Add <code>as&lt;JsonString&gt;()</code> and <code>is&lt;JsonString&gt;()</code></li>
<li>Add safe bool idiom in <code>JsonString</code></li>
<li>Add support for NUL in string values (issue #1646)</li>
<li>Add support for arbitrary array rank in <code>copyArray()</code></li>
<li>Add support for <code>char[][]</code> in <code>copyArray()</code></li>
<li>Remove <code>DeserializationError == bool</code> and <code>DeserializationError != bool</code></li>
<li>Renamed undocumented function <code>isUndefined()</code> to <code>isUnbound()</code></li>
<li>Fix <code>JsonVariant::memoryUsage()</code> for raw strings</li>
<li>Fix &lsquo;call of overloaded 'swap(BasicJsonDocument&amp;, BasicJsonDocument&amp;)&rsquo; is ambiguous<code>(issue #1678)</code></li>
<li><code>Fix inconsistent pool capacity between</code>BasicJsonDocument<code>'s copy and move constructors</code></li>
<li><code>Fix inconsistent pool capacity between</code>BasicJsonDocument<code>'s copy and move assignments</code></li>
<li><code>Fix return type of</code>StaticJsonDocument::operator=<code></code></li>
<li><code>Avoid pool reallocation in</code>BasicJsonDocument<code>'s copy assignment if capacity is the same</code></li>
<li><code>Avoid including</code>Arduino.h&lt;tt&gt;when all its features are disabled (issue #1692, PR #1693 by @paulocsanz)</li>
<li>AssumePROGMEM<code>is available as soon as</code>ARDUINO` is defined (consequence of #1693)</li>
</ul>
<h1><a class="anchor" id="autotoc_md175"></a>
v6.18.5 (2021-09-28)</h1>
<ul>
<li>Set <code>ARDUINOJSON_EMBEDDED_MODE</code> to <code>1</code> on Nios II (issue #1657)</li>
</ul>
<h1><a class="anchor" id="autotoc_md176"></a>
v6.18.4 (2021-09-06)</h1>
<ul>
<li>Fixed error &lsquo;'dummy&rsquo; may be used uninitialized<code>on GCC 11</code></li>
<li><code>Fixed error</code>expected unqualified-id before 'const'` on GCC 11 (issue #1622)</li>
<li>Filter: exact match takes precedence over wildcard (issue #1628)</li>
<li>Fixed deserialization of <code>\u0000</code> (issue #1646)</li>
</ul>
<h1><a class="anchor" id="autotoc_md177"></a>
v6.18.3 (2021-07-27)</h1>
<ul>
<li>Changed return type of <code>convertToJson()</code> and <code>Converter&lt;T&gt;::toJson()</code> to <code>void</code></li>
<li>Added <code>as&lt;std::string_view&gt;()</code> and <code>is&lt;std::string_view&gt;()</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md178"></a>
v6.18.2 (2021-07-19)</h1>
<ul>
<li>Removed a symlink because the Arduino Library Specification forbids it</li>
</ul>
<h1><a class="anchor" id="autotoc_md179"></a>
v6.18.1 (2021-07-03)</h1>
<ul>
<li>Fixed support for <code>volatile float</code> and <code>volatile double</code> (issue #1557)</li>
<li>Fixed error <code>[Pe070]: incomplete type is not allowed</code> on IAR (issue #1560)</li>
<li>Fixed <code>serializeJson(doc, String)</code> when allocation fails (issue #1572)</li>
<li>Fixed clang-tidy warnings (issue #1574, PR #1577 by @armandas)</li>
<li>Added fake class <code>InvalidConversion&lt;T1,T2&gt;</code> to easily identify invalid conversions (issue #1585)</li>
<li>Added support for <code>std::string_view</code> (issue #1578, PR #1554 by @0xFEEDC0DE64)</li>
<li>Fixed warning &lsquo;definition of implicit copy constructor for 'MsgPackDeserializer&rsquo; is deprecated because it has a user-declared copy assignment operator<code></code></li>
<li><code>Added</code>JsonArray::clear()<code>(issue #1597)</code></li>
<li><code>Fixed</code>JsonVariant::as&lt;unsigned&gt;()` (issue #1601)</li>
<li>Added support for ESP-IDF component build (PR #1562 by @qt1, PR #1599 by @andreaskuster)</li>
</ul>
<h1><a class="anchor" id="autotoc_md180"></a>
v6.18.0 (2021-05-05)</h1>
<ul>
<li>Added support for custom converters (issue #687)</li>
<li>Added support for <code><a class="el" href="classPrintable.html">Printable</a></code> (issue #1444)</li>
<li>Removed support for <code>char</code> values, see below (issue #1498)</li>
<li><code>deserializeJson()</code> leaves <code>\uXXXX</code> unchanged instead of returning <code>NotSupported</code></li>
<li><code>deserializeMsgPack()</code> inserts <code>null</code> instead of returning <code>NotSupported</code></li>
<li>Removed <code>DeserializationError::NotSupported</code></li>
<li>Added <code>JsonVariant::is&lt;JsonArrayConst/JsonObjectConst&gt;()</code> (issue #1412)</li>
<li>Added <code>JsonVariant::is&lt;JsonVariant/JsonVariantConst&gt;()</code> (issue #1412)</li>
<li>Changed <code>JsonVariantConst::is&lt;JsonArray/JsonObject&gt;()</code> to return <code>false</code> (issue #1412)</li>
<li>Simplified <code>JsonVariant::as&lt;T&gt;()</code> to always return <code>T</code> (see below)</li>
<li>Updated folders list in <code>.mbedignore</code> (PR #1515 by @AGlass0fMilk)</li>
<li>Fixed member-call-on-null-pointer in <code>getMember()</code> when array is empty</li>
<li><code>serializeMsgPack(doc, buffer, size)</code> doesn't add null-terminator anymore (issue #1545)</li>
<li><code>serializeJson(doc, buffer, size)</code> adds null-terminator only if there is enough room</li>
<li>PlatformIO: set <code>build.libArchive</code> to <code>false</code> (PR #1550 by @askreet)</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md181"></a>
Support for &lt;tt&gt;char&lt;/tt&gt; removed</h3>
<p>We cannot cast a <code>JsonVariant</code> to a <code>char</code> anymore, so the following will break: </p><div class="fragment"><div class="line"> {c++}</div>
<div class="line">char age = doc[&quot;age&quot;];  //  error: no matching function for call to &#39;variantAs(VariantData*&amp;)&#39;</div>
</div><!-- fragment --><p> Instead, you must use another integral type, such as <code>int8_t</code>: </p><div class="fragment"><div class="line"> {c++}</div>
<div class="line">int8_t age = doc[&quot;age&quot;];  // OK</div>
</div><!-- fragment --><p>Similarly, we cannot assign from a <code>char</code> anymore, so the following will break: </p><div class="fragment"><div class="line"> {c++}</div>
<div class="line">char age;</div>
<div class="line">doc[&quot;age&quot;] = age;  // error: no matching function for call to &#39;VariantRef::set(const char&amp;)&#39;</div>
</div><!-- fragment --><p> Instead, you must use another integral type, such as <code>int8_t</code>: </p><div class="fragment"><div class="line"> {c++}</div>
<div class="line">int8_t age;</div>
<div class="line">doc[&quot;age&quot;] = age;  // OK</div>
</div><!-- fragment --><p> A deprecation warning with the message "Support for `char` is deprecated, use `int8_t` or `uint8_t` instead" was added to allow a smooth transition.</p>
<h3><a class="anchor" id="autotoc_md182"></a>
&lt;tt&gt;as&lt;T&gt;()&lt;/tt&gt; always returns &lt;tt&gt;T&lt;/tt&gt;</h3>
<p>Previously, <code>JsonVariant::as&lt;T&gt;()</code> could return a type different from <code>T</code>. The most common example is <code>as&lt;char*&gt;()</code> that returned a <code>const char*</code>. While this feature simplified a few use cases, it was confusing and complicated the implementation of custom converters.</p>
<p>Starting from this version, <code>as&lt;T&gt;</code> doesn't try to auto-correct the return type and always return <code>T</code>, which means that you cannot write this anymore:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">Serial.println(doc[&quot;sensor&quot;].as&lt;char*&gt;());  // error: invalid conversion from &#39;const char*&#39; to &#39;char*&#39; [-fpermissive]</div>
</div><!-- fragment --><p>Instead, you must write:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">Serial.println(doc[&quot;sensor&quot;].as&lt;const char*&gt;());  // OK</div>
</div><!-- fragment --><p>A deprecation warning with the message "Replace `as&lt;char*&gt;()` with `as&lt;const char*&gt;()`" was added to allow a smooth transition.</p>
<h3><a class="anchor" id="autotoc_md183"></a>
&lt;tt&gt;DeserializationError::NotSupported&lt;/tt&gt; removed</h3>
<p>On a different topic, <code>DeserializationError::NotSupported</code> has been removed. Instead of returning this error:</p>
<ul>
<li><code>deserializeJson()</code> leaves <code>\uXXXX</code> unchanged (only when <code>ARDUINOJSON_DECODE_UNICODE</code> is <code>0</code>)</li>
<li><code>deserializeMsgPack()</code> replaces unsupported values with <code>null</code>s</li>
</ul>
<h3><a class="anchor" id="autotoc_md184"></a>
Const-aware &lt;tt&gt;is&lt;T&gt;()&lt;/tt&gt;</h3>
<p>Lastly, a very minor change concerns <code>JsonVariantConst::is&lt;T&gt;()</code>. It used to return <code>true</code> for <code>JsonArray</code> and <code>JsonOject</code>, but now it returns <code>false</code>. Instead, you must use <code>JsonArrayConst</code> and <code>JsonObjectConst</code>. </p>
<h1><a class="anchor" id="autotoc_md185"></a>
v6.17.3 (2021-02-15)</h1>
<ul>
<li>Made <code>JsonDocument</code>'s destructor protected (issue #1480)</li>
<li>Added missing calls to <code>client.stop()</code> in <code>JsonHttpClient.ino</code> (issue #1485)</li>
<li>Fixed error &lsquo;expected &rsquo;)' before 'char'<code>when</code>isdigit()<code>is a macro (issue #1487)</code></li>
<li><code>Fixed error</code>definition of implicit copy constructor is deprecated<code>on Clang 10</code></li>
<li><code>PlatformIO: set framework compatibility to</code>*` (PR #1490 by @maxgerhardt)</li>
</ul>
<h1><a class="anchor" id="autotoc_md186"></a>
v6.17.2 (2020-11-14)</h1>
<ul>
<li>Fixed invalid conversion error in <code>operator|(JsonVariant, char*)</code> (issue #1432)</li>
<li>Changed the default value of <code>ARDUINOJSON_ENABLE_PROGMEM</code> (issue #1433). It now checks that the <code>pgm_read_XXX</code> macros are defined before enabling <code>PROGMEM</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md187"></a>
v6.17.1 (2020-11-07)</h1>
<ul>
<li>Fixed error &lsquo;ambiguous overload for 'operator|&rsquo;<code>(issue #1411)</code></li>
<li><code>Fixed</code>operator|(MemberProxy, JsonObject)` (issue #1415)</li>
<li>Allowed more than 32767 values in non-embedded mode (issue #1414)</li>
</ul>
<h1><a class="anchor" id="autotoc_md188"></a>
v6.17.0 (2020-10-19)</h1>
<ul>
<li>Added a build failure when nullptr is defined as a macro (issue #1355)</li>
<li>Added <code>JsonDocument::overflowed()</code> which tells if the memory pool was too small (issue #1358)</li>
<li>Added <code>DeserializationError::EmptyInput</code> which tells if the input was empty</li>
<li>Added <code>DeserializationError::f_str()</code> which returns a <code>const __FlashStringHelper*</code> (issue #846)</li>
<li>Added <code>operator|(JsonVariantConst, JsonVariantConst)</code></li>
<li>Added filtering for MessagePack (issue #1298, PR #1394 by Luca Passarella)</li>
<li>Moved float convertion tables to PROGMEM</li>
<li>Fixed <code>JsonVariant::set((char*)0)</code> which returned false instead of true (issue #1368)</li>
<li>Fixed error <code>No such file or directory #include &lt;WString.h&gt;</code> (issue #1381)</li>
</ul>
<h1><a class="anchor" id="autotoc_md189"></a>
v6.16.1 (2020-08-04)</h1>
<ul>
<li>Fixed <code>deserializeJson()</code> that stopped reading after <code>{}</code> (issue #1335)</li>
</ul>
<h1><a class="anchor" id="autotoc_md190"></a>
v6.16.0 (2020-08-01)</h1>
<ul>
<li>Added comparisons (<code>&gt;</code>, <code>&gt;=</code>, <code>==</code>, <code>!=</code>, <code>&lt;</code>, and <code>&lt;=</code>) between <code>JsonVariant</code>s</li>
<li>Added string deduplication (issue #1303)</li>
<li>Added <code>JsonString::operator!=</code></li>
<li>Added wildcard key (<code>*</code>) for filters (issue #1309)</li>
<li>Set <code>ARDUINOJSON_DECODE_UNICODE</code> to <code>1</code> by default</li>
<li>Fixed <code>copyArray()</code> not working with <code><a class="el" href="classString.html">String</a></code>, <code>ElementProxy</code>, and <code>MemberProxy</code></li>
<li>Fixed error <code>getOrAddElement is not a member of ElementProxy</code> (issue #1311)</li>
<li>Fixed excessive stack usage when compiled with <code>-Og</code> (issues #1210 and #1314)</li>
<li>Fixed <code>Warning[Pa093]: implicit conversion from floating point to integer</code> on IAR compiler (PR #1328 by @stawiski)</li>
</ul>
<h1><a class="anchor" id="autotoc_md191"></a>
v6.15.2 (2020-05-15)</h1>
<ul>
<li>CMake: don't build tests when imported in another project</li>
<li>CMake: made project arch-independent</li>
<li>Visual Studio: fixed error C2766 with flag <code>/Zc:__cplusplus</code> (issue #1250)</li>
<li>Added support for <code>JsonDocument</code> to <code>copyArray()</code> (issue #1255)</li>
<li>Added support for <code>enum</code>s in <code>as&lt;T&gt;()</code> and <code>is&lt;T&gt;()</code> (issue #1256)</li>
<li>Added <code>JsonVariant</code> as an input type for <code>deserializeXxx()</code> <br  />
 For example, you can do: <code>deserializeJson(doc2, doc1["payload"])</code></li>
<li>Break the build if using 64-bit integers with ARDUINOJSON_USE_LONG_LONG==0</li>
</ul>
<h1><a class="anchor" id="autotoc_md192"></a>
v6.15.1 (2020-04-08)</h1>
<ul>
<li>Fixed "maybe-uninitialized" warning (issue #1217)</li>
<li>Fixed "statement is unreachable" warning on IAR (issue #1233)</li>
<li>Fixed "pointless integer comparison" warning on IAR (issue #1233)</li>
<li>Added CMake "install" target (issue #1209)</li>
<li>Disabled alignment on AVR (issue #1231)</li>
</ul>
<h1><a class="anchor" id="autotoc_md193"></a>
v6.15.0 (2020-03-22)</h1>
<ul>
<li>Added <code>DeserializationOption::Filter</code> (issue #959)</li>
<li>Added example <code>JsonFilterExample.ino</code></li>
<li>Changed the array subscript operator to automatically add missing elements</li>
<li>Fixed "deprecated-copy" warning on GCC 9 (fixes #1184)</li>
<li>Fixed <code>MemberProxy::set(char[])</code> not duplicating the string (issue #1191)</li>
<li>Fixed enums serialized as booleans (issue #1197)</li>
<li>Fixed incorrect string comparison on some platforms (issue #1198)</li>
<li>Added move-constructor and move-assignment to <code>BasicJsonDocument</code></li>
<li>Added <code>BasicJsonDocument::garbageCollect()</code> (issue #1195)</li>
<li>Added <code>StaticJsonDocument::garbageCollect()</code></li>
<li>Changed copy-constructor of <code>BasicJsonDocument</code> to preserve the capacity of the source.</li>
<li>Removed copy-constructor of <code>JsonDocument</code> (issue #1189)</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md194"></a>
Copy-constructor of &lt;tt&gt;BasicJsonDocument&lt;/tt&gt;</h3>
<p>In previous versions, the copy constructor of <code>BasicJsonDocument</code> looked at the source's <code>memoryUsage()</code> to choose its capacity. Now, the copy constructor of <code>BasicJsonDocument</code> uses the same capacity as the source.</p>
<p>Example:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonDocument doc1(64);</div>
<div class="line">doc1.set(String(&quot;example&quot;));</div>
<div class="line"> </div>
<div class="line">DynamicJsonDocument doc2 = doc1;</div>
<div class="line">Serial.print(doc2.capacity());  // 8 with ArduinoJson 6.14</div>
<div class="line">                                // 64 with ArduinoJson 6.15</div>
</div><!-- fragment --><p>I made this change to get consistent results between copy-constructor and move-constructor, and whether RVO applies or not.</p>
<p>If you use the copy-constructor to optimize your documents, you can use <code>garbageCollect()</code> or <code>shrinkToFit()</code> instead.</p>
<h3><a class="anchor" id="autotoc_md195"></a>
Copy-constructor of &lt;tt&gt;JsonDocument&lt;/tt&gt;</h3>
<p>In previous versions, it was possible to create a function that take a <code>JsonDocument</code> by value.</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">void myFunction(JsonDocument doc) {}</div>
</div><!-- fragment --><p>This function gives the wrong clues because it doesn't receive a copy of the <code>JsonDocument</code>, only a sliced version. It worked because the copy constructor copied the internal pointers, but it was an accident.</p>
<p>From now, if you need to pass a <code>JsonDocument</code> to a function, you must use a reference:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">void myFunction(JsonDocument&amp; doc) {}</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md196"></a>
v6.14.1 (2020-01-27)</h1>
<ul>
<li>Fixed regression in UTF16 decoding (issue #1173)</li>
<li>Fixed <code>containsKey()</code> on <code>JsonVariantConst</code></li>
<li>Added <code>getElement()</code> and <code>getMember()</code> to <code>JsonVariantConst</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md197"></a>
v6.14.0 (2020-01-16)</h1>
<ul>
<li>Added <code>BasicJsonDocument::shrinkToFit()</code></li>
<li>Added support of <code>uint8_t</code> for <code>serializeJson()</code>, <code>serializeJsonPretty()</code>, and <code>serializeMsgPack()</code> (issue #1142)</li>
<li>Added <code>ARDUINOJSON_ENABLE_COMMENTS</code> to enable support for comments (defaults to 0)</li>
<li>Auto enable support for <code>std::string</code> and <code>std::stream</code> on modern compilers (issue #1156) (No need to define <code>ARDUINOJSON_ENABLE_STD_STRING</code> and <code>ARDUINOJSON_ENABLE_STD_STREAM</code> anymore)</li>
<li>Improved decoding of UTF-16 surrogate pairs (PR #1157 by @kaysievers) (ArduinoJson now produces standard UTF-8 instead of CESU-8)</li>
<li>Added <code>measureJson</code>, <code>measureJsonPretty</code>, and <code>measureMsgPack</code> to <code>keywords.txt</code> (This file is used for syntax highlighting in the Arduino IDE)</li>
<li>Fixed <code>variant.is&lt;nullptr_t&gt;()</code></li>
<li>Fixed value returned by <code>serializeJson()</code>, <code>serializeJsonPretty()</code>, and <code>serializeMsgPack()</code> when writing to a <code><a class="el" href="classString.html">String</a></code></li>
<li>Improved speed of <code>serializeJson()</code>, <code>serializeJsonPretty()</code>, and <code>serializeMsgPack()</code> when writing to a <code><a class="el" href="classString.html">String</a></code></li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md198"></a>
Comments</h3>
<p>Support for comments in input is now optional and disabled by default.</p>
<p>If you need support for comments, you must defined <code>ARDUINOJSON_ENABLE_COMMENTS</code> to <code>1</code>; otherwise, you'll receive <code>InvalidInput</code> errors.</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">#define ARDUINOJSON_ENABLE_COMMENTS 1</div>
<div class="line">#include &lt;ArduinoJson.h&gt;</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md199"></a>
v6.13.0 (2019-11-01)</h1>
<ul>
<li>Added support for custom writer/reader classes (issue #1088)</li>
<li>Added conversion from <code>JsonArray</code> and <code>JsonObject</code> to <code>bool</code>, to be consistent with <code>JsonVariant</code></li>
<li>Fixed <code>deserializeJson()</code> when input contains duplicate keys (issue #1095)</li>
<li>Improved <code>deserializeMsgPack()</code> speed by reading several bytes at once</li>
<li>Added detection of Atmel AVR8/GNU C Compiler (issue #1112)</li>
<li>Fixed deserializer that stopped reading at the first <code>0xFF</code> (PR #1118 by @mikee47)</li>
<li>Fixed dangling reference in copies of <code>MemberProxy</code> and <code>ElementProxy</code> (issue #1120)</li>
</ul>
<h1><a class="anchor" id="autotoc_md200"></a>
v6.12.0 (2019-09-05)</h1>
<ul>
<li>Use absolute instead of relative includes (issue #1072)</li>
<li>Changed <code>JsonVariant::as&lt;bool&gt;()</code> to return <code>true</code> for any non-null value (issue #1005)</li>
<li>Moved ancillary files to <code>extras/</code> (issue #1011)</li>
</ul>
<h1><a class="anchor" id="autotoc_md201"></a>
v6.11.5 (2019-08-23)</h1>
<ul>
<li>Added fallback implementations of <code>strlen_P()</code>, <code>strncmp_P()</code>, <code>strcmp_P()</code>, and <code>memcpy_P()</code> (issue #1073)</li>
</ul>
<h1><a class="anchor" id="autotoc_md202"></a>
v6.11.4 (2019-08-12)</h1>
<ul>
<li>Added <code>measureJson()</code> to the <code>ArduinoJson</code> namespace (PR #1069 by @nomis)</li>
<li>Added support for <code>basic_string&lt;char, traits, allocator&gt;</code> (issue #1045)</li>
<li>Fixed example <code>JsonConfigFile.ino</code> for ESP8266</li>
<li>Include <code><a class="el" href="Arduino_8h_source.html">Arduino.h</a></code> if <code>ARDUINO</code> is defined (PR #1071 by @nomis)</li>
</ul>
<h1><a class="anchor" id="autotoc_md203"></a>
v6.11.3 (2019-07-22)</h1>
<ul>
<li>Added operators <code>==</code> and <code>!=</code> for <code>JsonDocument</code>, <code>ElementProxy</code>, and <code>MemberProxy</code></li>
<li>Fixed comparison of <code>JsonVariant</code> when one contains a linked string and the other contains an owned string (issue #1051)</li>
</ul>
<h1><a class="anchor" id="autotoc_md204"></a>
v6.11.2 (2019-07-08)</h1>
<ul>
<li>Fixed assignment of <code>JsonDocument</code> to <code>JsonVariant</code> (issue #1023)</li>
<li>Fix invalid conversion error on Particle Argon (issue #1035)</li>
</ul>
<h1><a class="anchor" id="autotoc_md205"></a>
v6.11.1 (2019-06-21)</h1>
<ul>
<li>Fixed <code>serialized()</code> not working with Flash strings (issue #1030)</li>
</ul>
<h1><a class="anchor" id="autotoc_md206"></a>
v6.11.0 (2019-05-26)</h1>
<ul>
<li>Fixed <code>deserializeJson()</code> silently accepting a <code>Stream*</code> (issue #978)</li>
<li>Fixed invalid result from <code>operator|</code> (issue #981)</li>
<li>Made <code>deserializeJson()</code> more picky about trailing characters (issue #980)</li>
<li>Added <code>ARDUINOJSON_ENABLE_NAN</code> (default=0) to enable NaN in JSON (issue #973)</li>
<li>Added <code>ARDUINOJSON_ENABLE_INFINITY</code> (default=0) to enable Infinity in JSON</li>
<li>Removed implicit conversion in comparison operators (issue #998)</li>
<li>Added lexicographical comparison for <code>JsonVariant</code></li>
<li>Added support for <code>nullptr</code> (issue #998)</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md207"></a>
NaN and Infinity</h3>
<p>The JSON specification allows neither NaN not Infinity, but previous versions of ArduinoJson supported it. Now, ArduinoJson behaves like most other libraries: a NaN or and Infinity in the <code>JsonDocument</code>, becomes a <code>null</code> in the output JSON. Also, <code>deserializeJson()</code> returns <code>InvalidInput</code> if the JSON document contains NaN or Infinity.</p>
<p>This version still supports NaN and Infinity in JSON documents, but it's disabled by default to be compatible with other JSON parsers. If you need the old behavior back, define <code>ARDUINOJSON_ENABLE_NAN</code> and <code>ARDUINOJSON_ENABLE_INFINITY</code> to <code>1</code>;:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">#define ARDUINOJSON_ENABLE_NAN 1</div>
<div class="line">#define ARDUINOJSON_ENABLE_INFINITY 1</div>
<div class="line">#include &lt;ArduinoJson.h&gt;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md208"></a>
The "or" operator</h3>
<p>This version slightly changes the behavior of the | operator when the variant contains a float and the user requests an integer.</p>
<p>Older versions returned the floating point value truncated. Now, it returns the default value.</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">// suppose variant contains 1.2</div>
<div class="line">int value = variant | 3;</div>
<div class="line"> </div>
<div class="line">// old behavior:</div>
<div class="line">value == 1</div>
<div class="line"> </div>
<div class="line">// new behavior</div>
<div class="line">value == 3</div>
</div><!-- fragment --><p>If you need the old behavior, you must add <code>if (variant.is&lt;float&gt;())</code>. </p>
<h1><a class="anchor" id="autotoc_md209"></a>
v6.10.1 (2019-04-23)</h1>
<ul>
<li>Fixed error "attributes are not allowed on a function-definition"</li>
<li>Fixed <code>deserializeJson()</code> not being picky enough (issue #969)</li>
<li>Fixed error "no matching function for call to write(uint8_t)" (issue #972)</li>
</ul>
<h1><a class="anchor" id="autotoc_md210"></a>
v6.10.0 (2019-03-22)</h1>
<ul>
<li>Fixed an integer overflow in the JSON deserializer</li>
<li>Added overflow handling in <code>JsonVariant::as&lt;T&gt;()</code> and <code>JsonVariant::is&lt;T&gt;()</code>.<ul>
<li><code>as&lt;T&gt;()</code> returns <code>0</code> if the integer <code>T</code> overflows</li>
<li><code>is&lt;T&gt;()</code> returns <code>false</code> if the integer <code>T</code> overflows</li>
</ul>
</li>
<li>Added <code>BasicJsonDocument</code> to support custom allocator (issue #876)</li>
<li>Added <code>JsonDocument::containsKey()</code> (issue #938)</li>
<li>Added <code>JsonVariant::containsKey()</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md211"></a>
v6.9.1 (2019-03-01)</h1>
<ul>
<li>Fixed warning "unused variable" with GCC 4.4 (issue #912)</li>
<li>Fixed warning "cast  increases required alignment" (issue #914)</li>
<li>Fixed warning "conversion may alter value" (issue #914)</li>
<li>Fixed naming conflict with "CAPACITY" (issue #839)</li>
<li>Muted warning "will change in GCC 7.1" (issue #914)</li>
<li>Added a clear error message for <code>StaticJsonBuffer</code> and <code>DynamicJsonBuffer</code></li>
<li>Marked ArduinoJson.h as a "system header"</li>
</ul>
<h1><a class="anchor" id="autotoc_md212"></a>
v6.9.0 (2019-02-26)</h1>
<ul>
<li>Decode escaped Unicode characters like \u00DE (issue #304, PR #791) Many thanks to Daniel Schulte (aka @trilader) who implemented this feature.</li>
<li>Added option ARDUINOJSON_DECODE_UNICODE to enable it</li>
<li>Converted <code>JsonArray::copyFrom()/copyTo()</code> to free functions <code>copyArray()</code></li>
<li>Renamed <code>JsonArray::copyFrom()</code> and <code>JsonObject::copyFrom()</code> to <code>set()</code></li>
<li>Renamed <code>JsonArray::get()</code> to <code>getElement()</code></li>
<li>Renamed <code>JsonArray::add()</code> (without arg) to <code>addElement()</code></li>
<li>Renamed <code>JsonObject::get()</code> to <code>getMember()</code></li>
<li>Renamed <code>JsonObject::getOrCreate()</code> to <code>getOrAddMember()</code></li>
<li>Fixed <code>JsonVariant::isNull()</code> not returning <code>true</code> after <code>set((char*)0)</code></li>
<li>Fixed segfault after <code>variant.set(serialized((char*)0))</code></li>
<li>Detect <code>IncompleteInput</code> in <code>false</code>, <code>true</code>, and <code>null</code></li>
<li>Added <code>JsonDocument::size()</code></li>
<li>Added <code>JsonDocument::remove()</code></li>
<li>Added <code>JsonVariant::clear()</code></li>
<li>Added <code>JsonVariant::remove()</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md213"></a>
v6.8.0-beta (2019-01-30)</h1>
<ul>
<li>Import functions in the ArduinoJson namespace to get clearer errors</li>
<li>Improved syntax highlighting in Arduino IDE</li>
<li>Removed default capacity of <code>DynamicJsonDocument</code></li>
<li><code>JsonArray::copyFrom()</code> accepts <code>JsonArrayConst</code></li>
<li><code>JsonVariant::set()</code> accepts <code>JsonArrayConst</code> and <code>JsonObjectConst</code></li>
<li><code>JsonDocument</code> was missing in the ArduinoJson namespace</li>
<li>Added <code>memoryUsage()</code> to <code>JsonArray</code>, <code>JsonObject</code>, and <code>JsonVariant</code></li>
<li>Added <code>nesting()</code> to <code>JsonArray</code>, <code>JsonDocument</code>, <code>JsonObject</code>, and <code>JsonVariant</code></li>
<li>Replaced <code>JsonDocument::nestingLimit</code> with an additional parameter to <code>deserializeJson()</code> and <code>deserializeMsgPack()</code></li>
<li>Fixed uninitialized variant in <code>JsonDocument</code></li>
<li>Fixed <code>StaticJsonDocument</code> copy constructor and copy assignment</li>
<li>The copy constructor of <code>DynamicJsonDocument</code> chooses the capacity according to the memory usage of the source, not from the capacity of the source.</li>
<li>Added the ability to create/assign a <code>StaticJsonDocument</code>/<code>DynamicJsonDocument</code> from a <code>JsonArray</code>/<code>JsonObject</code>/<code>JsonVariant</code></li>
<li>Added <code>JsonDocument::isNull()</code></li>
<li>Added <code>JsonDocument::operator[]</code></li>
<li>Added <code>ARDUINOJSON_TAB</code> to configure the indentation character</li>
<li>Reduced the size of the pretty JSON serializer</li>
<li>Added <code>add()</code>, <code>createNestedArray()</code> and <code>createNestedObject()</code> to <code>JsonVariant</code></li>
<li><code>JsonVariant</code> automatically promotes to <code>JsonObject</code> or <code>JsonArray</code> on write. Calling <code>JsonVariant::to&lt;T&gt;()</code> is not required anymore.</li>
<li><code>JsonDocument</code> now support the same operations as <code>JsonVariant</code>. Calling <code>JsonDocument::as&lt;T&gt;()</code> is not required anymore.</li>
<li>Fixed example <code>JsonHttpClient.ino</code></li>
<li>User can now use a <code>JsonString</code> as a key or a value</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md214"></a>
&lt;tt&gt;DynamicJsonDocument&lt;/tt&gt;'s constructor</h3>
<p>The parameter to the constructor of <code>DynamicJsonDocument</code> is now mandatory</p>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonDocument doc;</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonDocument doc(1024);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md215"></a>
Nesting limit</h3>
<p><code>JsonDocument::nestingLimit</code> was replaced with a new parameter to <code>deserializeJson()</code> and <code>deserializeMsgPack()</code>.</p>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">doc.nestingLimit = 15;</div>
<div class="line">deserializeJson(doc, input);</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">deserializeJson(doc, input, DeserializationOption::NestingLimit(15));</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md216"></a>
v6.7.0-beta (2018-12-07)</h1>
<ul>
<li>Removed the automatic expansion of <code>DynamicJsonDocument</code>, it now has a fixed capacity.</li>
<li>Restored the monotonic allocator because the code was getting too big</li>
<li>Reduced the memory usage</li>
<li>Reduced the code size</li>
<li>Renamed <code>JsonKey</code> to <code>JsonString</code></li>
<li>Removed spurious files in the Particle library</li>
</ul>
<h1><a class="anchor" id="autotoc_md217"></a>
v6.6.0-beta (2018-11-13)</h1>
<ul>
<li>Removed <code>JsonArray::is&lt;T&gt;(i)</code> and <code>JsonArray::set(i,v)</code></li>
<li>Removed <code>JsonObject::is&lt;T&gt;(k)</code> and <code>JsonObject::set(k,v)</code></li>
<li>Replaced <code>T JsonArray::get&lt;T&gt;(i)</code> with <code>JsonVariant JsonArray::get(i)</code></li>
<li>Replaced <code>T JsonObject::get&lt;T&gt;(k)</code> with <code>JsonVariant JsonObject::get(k)</code></li>
<li>Added <code>JSON_STRING_SIZE()</code></li>
<li><strike>Replacing or removing a value now releases the memory</strike></li>
<li>Added <code>DeserializationError::code()</code> to be used in switch statements (issue #846)</li>
</ul>
<h1><a class="anchor" id="autotoc_md218"></a>
v6.5.0-beta (2018-10-13)</h1>
<ul>
<li>Added implicit conversion from <code>JsonArray</code> and <code>JsonObject</code> to <code>JsonVariant</code></li>
<li>Allow mixed configuration in compilation units (issue #809)</li>
<li>Fixed object keys not being duplicated</li>
<li><code>JsonPair::key()</code> now returns a <code>JsonKey</code></li>
<li>Increased the default capacity of <code>DynamicJsonDocument</code></li>
<li>Fixed <code>JsonVariant::is&lt;<a class="el" href="classString.html">String</a>&gt;()</code> (closes #763)</li>
<li>Added <code>JsonArrayConst</code>, <code>JsonObjectConst</code>, and <code>JsonVariantConst</code></li>
<li>Added copy-constructor and copy-assignment-operator for <code>JsonDocument</code> (issue #827)</li>
</ul>
<h1><a class="anchor" id="autotoc_md219"></a>
v6.4.0-beta (2018-09-11)</h1>
<ul>
<li>Copy <code>JsonArray</code> and <code>JsonObject</code>, instead of storing pointers (issue #780)</li>
<li>Added <code>JsonVariant::to&lt;JsonArray&gt;()</code> and <code>JsonVariant::to&lt;JsonObject&gt;()</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md220"></a>
v6.3.0-beta (2018-08-31)</h1>
<ul>
<li>Implemented reference semantics for <code>JsonVariant</code></li>
<li>Replaced <code>JsonPair</code>'s <code>key</code> and <code>value</code> with <code>key()</code> and <code>value()</code></li>
<li>Fixed <code>serializeJson(obj[key], dst)</code> (issue #794)</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md221"></a>
JsonVariant</h3>
<p><code>JsonVariant</code> now has a semantic similar to <code>JsonObject</code> and <code>JsonArray</code>. It's a reference to a value stored in the <code>JsonDocument</code>. As a consequence, a <code>JsonVariant</code> cannot be used as a standalone variable anymore.</p>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">JsonVariant myValue = 42;</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonDocument doc;</div>
<div class="line">JsonVariant myValue = doc.to&lt;JsonVariant&gt;();</div>
<div class="line">myValue.set(42);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md222"></a>
JsonPair</h3>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">for(JsonPair p : myObject) {</div>
<div class="line">  Serial.println(p.key);</div>
<div class="line">  Serial.println(p.value.as&lt;int&gt;());</div>
<div class="line">}</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">for(JsonPair p : myObject) {</div>
<div class="line">  Serial.println(p.key());</div>
<div class="line">  Serial.println(p.value().as&lt;int&gt;());</div>
<div class="line">}</div>
</div><!-- fragment --><p>CAUTION: the key is now read only! </p>
<h1><a class="anchor" id="autotoc_md223"></a>
v6.2.3-beta (2018-07-19)</h1>
<ul>
<li>Fixed exception when using Flash strings as object keys (issue #784)</li>
</ul>
<h1><a class="anchor" id="autotoc_md224"></a>
v6.2.2-beta (2018-07-18)</h1>
<ul>
<li>Fixed &lsquo;invalid application of 'sizeof&rsquo; to incomplete type '__FlashStringHelper'<code>(issue #783)</code></li>
<li><code>Fixed</code>char[]<code>not duplicated when passed to</code>JsonVariant::operator[]`</li>
</ul>
<h1><a class="anchor" id="autotoc_md225"></a>
v6.2.1-beta (2018-07-17)</h1>
<ul>
<li>Fixed <code>JsonObject</code> not inserting keys of type <code><a class="el" href="classString.html">String</a></code> (issue #782)</li>
</ul>
<h1><a class="anchor" id="autotoc_md226"></a>
v6.2.0-beta (2018-07-12)</h1>
<ul>
<li>Disabled lazy number deserialization (issue #772)</li>
<li>Fixed <code>JsonVariant::is&lt;int&gt;()</code> that returned true for empty strings</li>
<li>Improved float serialization when <code>-fsingle-precision-constant</code> is used</li>
<li>Renamed function <code>RawJson()</code> to <code>serialized()</code></li>
<li><code>serializeMsgPack()</code> now supports values marked with <code>serialized()</code></li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md227"></a>
Non quoted strings</h3>
<p>Non quoted strings are now forbidden in values, but they are still allowed in keys. For example, <code>{key:"value"}</code> is accepted, but <code>{key:value}</code> is not.</p>
<h3><a class="anchor" id="autotoc_md228"></a>
Preformatted values</h3>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">object[&quot;values&quot;] = RawJson(&quot;[1,2,3,4]&quot;);</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">object[&quot;values&quot;] = serialized(&quot;[1,2,3,4]&quot;);</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md229"></a>
v6.1.0-beta (2018-07-02)</h1>
<ul>
<li>Return <code>JsonArray</code> and <code>JsonObject</code> by value instead of reference (issue #309)</li>
<li>Replaced <code>success()</code> with <code>isNull()</code></li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">JsonObject&amp; obj = doc.to&lt;JsonObject&gt;();</div>
<div class="line">JsonArray&amp; arr = obj.createNestedArray(&quot;key&quot;);</div>
<div class="line">if (!arr.success()) {</div>
<div class="line">  Serial.println(&quot;Not enough memory&quot;);</div>
<div class="line">  return;</div>
<div class="line">}</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">JsonObject obj = doc.to&lt;JsonObject&gt;();</div>
<div class="line">JsonArray arr = obj.createNestedArray(&quot;key&quot;);</div>
<div class="line">if (arr.isNull()) {</div>
<div class="line">  Serial.println(&quot;Not enough memory&quot;);</div>
<div class="line">  return;</div>
<div class="line">}</div>
</div><!-- fragment --> </blockquote>
<h1><a class="anchor" id="autotoc_md230"></a>
v6.0.1-beta (2018-06-11)</h1>
<ul>
<li>Fixed conflicts with <code>isnan()</code> and <code>isinf()</code> macros (issue #752)</li>
</ul>
<h1><a class="anchor" id="autotoc_md231"></a>
v6.0.0-beta (2018-06-07)</h1>
<ul>
<li>Added <code>DynamicJsonDocument</code> and <code>StaticJsonDocument</code></li>
<li>Added <code>deserializeJson()</code></li>
<li>Added <code>serializeJson()</code> and <code>serializeJsonPretty()</code></li>
<li>Added <code>measureJson()</code> and <code>measureJsonPretty()</code></li>
<li>Added <code>serializeMsgPack()</code>, <code>deserializeMsgPack()</code> and <code>measureMsgPack()</code> (issue #358)</li>
<li>Added example <code>MsgPackParser.ino</code> (issue #358)</li>
<li>Added support for non zero-terminated strings (issue #704)</li>
<li>Removed <code>JsonBuffer::parseArray()</code>, <code>parseObject()</code> and <code>parse()</code></li>
<li>Removed <code>JsonBuffer::createArray()</code> and <code>createObject()</code></li>
<li>Removed <code>printTo()</code> and <code>prettyPrintTo()</code></li>
<li>Removed <code>measureLength()</code> and <code>measurePrettyLength()</code></li>
<li>Removed all deprecated features</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md232"></a>
Deserialization</h3>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonBuffer jb;</div>
<div class="line">JsonObject&amp; obj = jb.parseObject(json);</div>
<div class="line">if (obj.success()) {</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonDocument doc;</div>
<div class="line">DeserializationError error = deserializeJson(doc, json);</div>
<div class="line">if (error) {</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line">JsonObject&amp; obj = doc.as&lt;JsonObject&gt;();</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md233"></a>
Serialization</h3>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonBuffer jb;</div>
<div class="line">JsonObject&amp; obj = jb.createObject();</div>
<div class="line">obj[&quot;key&quot;] = &quot;value&quot;;</div>
<div class="line">obj.printTo(Serial);</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonDocument obj;</div>
<div class="line">JsonObject&amp; obj = doc.to&lt;JsonObject&gt;();</div>
<div class="line">obj[&quot;key&quot;] = &quot;value&quot;;</div>
<div class="line">serializeJson(doc, Serial);</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
